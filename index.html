<!DOCTYPE html>
<html>
	<head>
		<style>
		input{
			width: 50px;
		}
		textarea{
			text-transform: uppercase;
			overflow-y: scroll;
			margin-top: 10px;
		}
		</style>
		<title> Enigma HTML </title>
		<script src = "rotor.js"></script>
		<!--<script src = "enigma.js"></script>-->

	</head>
	<body>
		<input type="number" id="rotor1" max="25" min="0" value="10"></input>
		<input type="number" id="rotor2" max="25" min="0" value="0"></input>
		<input type="number" id="rotor3" max="25" min="0" value="0"></input><br>
		<textarea id="inpuText"></textarea>
		<textarea id="outputText"></textarea> <br>
		<button id = "encryptButton">Click Me</button>
		<script>
			var rot_1_pos = document.getElementById("rotor1");
			var rot_2_pos = document.getElementById("rotor2");
			var rot_3_pos = document.getElementById("rotor3");

			var inputSource = document.getElementById("inpuText");
			var outputTarget = document.getElementById("outputText");

			var Rotor1 = new Rotor("EKMFLGDQVZNTOWYHXUSPAIBRCJ",0);
			var Rotor2 = new Rotor("AJDKSIRUXBLHWTMCQGZNPYFVOE",0);
			var Rotor3 = new Rotor("BDFHJLCPRTXVZNYEIWGAKMUSQO",0);
			var Reflector = new Rotor("YRUHQSLDPXNGOKMIEBFZCWVJAT",0);

			var eButton = document.getElementById("encryptButton");

			eButton.onclick = function(){
				Rotor1.setPosition(rot_1_pos.value);
				Rotor2.setPosition(rot_2_pos.value);
				Rotor3.setPosition(rot_3_pos.value);
				var inputSentence = inputSource.value;
				var outputSentence = "";
				for(var i = 0; i<inputSentence.length; i++)
				{
				  var testLetter = inputSentence[i];
					testLetter = Rotor1.forwardEncrypt(testLetter);
					testLetter = Rotor2.forwardEncrypt(testLetter);
					testLetter = Rotor3.forwardEncrypt(testLetter);
					testLetter = Reflector.forwardEncrypt(testLetter);
					testLetter = Rotor3.reverseEncrypt(testLetter);
					testLetter = Rotor2.reverseEncrypt(testLetter);
					testLetter = Rotor1.reverseEncrypt(testLetter);
					Rotor1.rotateRotor();
					rot_1_pos.value = Rotor1.currentPosition;
					if(Rotor1.currentPosition==0)
					{
						Rotor2.rotateRotor();
						rot_2_pos.value = Rotor2.currentPosition;
						if(Rotor2.currentPosition==0)
						{
								Rotor3.rotateRotor();
								rot_3_pos.value = Rotor3.currentPosition;
						}
					}
				  outputSentence = outputSentence + testLetter;
				}
				outputTarget.value = outputSentence;
			}
		</script>
	</body>
</html>
